(("undefined"!=typeof globalThis?globalThis:self)["makoChunk_chatbi-simple"]=("undefined"!=typeof globalThis?globalThis:self)["makoChunk_chatbi-simple"]||[]).push([["ea5605a4"],{"755fc46e":function(e,s,t){"use strict";t.d(s,"__esModule",{value:!0}),t.d(s,"default",{enumerable:!0,get:function(){return n;}});var c=t("94a7e9a3"),i=t("69341729"),l=t("8fdf2a5a"),a=t("73182086");function n(){let{initialState:e,setInitialState:s}=(0,l.useModel)("@@initialState"),[t,n]=(0,i.useState)(!1),[o,r]=(0,i.useState)(""),u=async()=>{n(!0),r("");try{await a.authingClient.loginWithRedirect();}catch(e){r(e.message||"\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5");}finally{n(!1);}},d=async()=>{let t=await (0,a.checkTokenValid)(),c=window.location.pathname;if(t){if(!(null==e?void 0:e.currentUser)||0===Object.keys(null==e?void 0:e.currentUser).length){let e=await (0,a.getCurrentUser)();s(s=>({...s,currentUser:e}));}(0,a.isWithWhiteList)(c)&&l.history.push("/");}else setTimeout(()=>a.authingClient.loginWithRedirect(),1e3);};return(0,i.useEffect)(()=>{d();},[]),(0,c.jsxs)("div",{className:"cs-p-8 cs-max-w-md cs-mx-auto",children:[(0,c.jsx)("h1",{className:"cs-text-2xl cs-font-bold cs-mb-6 cs-text-center",children:"\u7528\u6237\u767B\u5F55"}),o&&(0,c.jsx)("div",{className:"cs-bg-red-100 cs-text-red-700 cs-p-4 cs-rounded cs-mb-4",children:o}),(0,c.jsx)("button",{onClick:u,disabled:t,className:"cs-w-full cs-bg-blue-600 cs-text-white cs-py-3 cs-px-4 cs-rounded-lg hover:cs-bg-blue-700 cs-transition-colors disabled:cs-bg-gray-400",children:t?"\u767B\u5F55\u4E2D...":"\u4F7F\u7528Authing\u767B\u5F55"}),(0,c.jsx)("button",{onClick:a.handleLogout,className:"cs-w-full cs-mt-4 cs-bg-gray-600 cs-text-white cs-py-3 cs-px-4 cs-rounded-lg hover:cs-bg-gray-700 cs-transition-colors",children:"\u9000\u51FA\u767B\u5F55"})]});}}}]);
//# sourceMappingURL=ea5605a4-async.d83c3110.js.map